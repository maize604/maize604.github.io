<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>通过RNA测序解析玉米籽粒复杂的调控网络</title>
      <link href="/2019/08/14/%E9%80%9A%E8%BF%87RNA%E6%B5%8B%E5%BA%8F%E8%A7%A3%E6%9E%90%E7%8E%89%E7%B1%B3%E7%B1%BD%E7%B2%92%E5%A4%8D%E6%9D%82%E7%9A%84%E8%B0%83%E6%8E%A7%E7%BD%91%E7%BB%9C/"/>
      <url>/2019/08/14/%E9%80%9A%E8%BF%87RNA%E6%B5%8B%E5%BA%8F%E8%A7%A3%E6%9E%90%E7%8E%89%E7%B1%B3%E7%B1%BD%E7%B2%92%E5%A4%8D%E6%9D%82%E7%9A%84%E8%B0%83%E6%8E%A7%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h2><span id="1-文章概述">1. 文章概述</span></h2><p>本篇要解读的文献是一篇发表较早，却比较经典的文章。是2013发表于 Nature Communication 上的一篇 eQTL的文章。<br><img src="fig-1.png" alt="文章截图"></p><p>玉米基因组非常复杂，其重复性序列高达85%。作者通过对368份玉米多样性材料授粉后15天的籽粒进行RNA测序分析，获得了28769个基因的表达量，这些基因数约占玉米注释基因的60%，同时还获得了360万来自基因内的SNP标记。该项研究把基因表达量作为表型，通过全基因组关联分析，鉴定了 16408 个 eQTL。然后，通过发展的两步分析方法，把 95.1% 的 eQTL 限定到 10Kb 的区域，其中 67.7% 的 eQTL 只包含一个候选基因。</p><a id="more"></a><p>该研究认为，这不但说明基因的表达量可当作表型进行遗传分析，也充分体现了在玉米中进行关联分析的精度非常高，大部分都可以直接定位到基因。相对于其它农艺形状，基因表达的遗传结构相对简单，大部分只受1个或者2个位点控制。因此，该数据的集成，为进一步的玉米籽粒发育、基因克隆、表达调控网络重建等提供了极好资源。作者利用玉米籽粒类胡萝卜素为例证，通过联合分析，不但验证了此前基因克隆的结果，同时找到了55个其它可能与类胡萝卜素合成有关的基因，并重建了其可能的代谢调控网络。这为籽粒有关基因的挖掘和网络重建提供了新思路。</p><blockquote><p><strong>Abstract</strong><br>RNA sequencing can simultaneously identify exonic polymorphisms and quantitate gene expression. Here we report RNA sequencing of developing maize kernels from 368 inbred lines producing 25.8 billion reads and 3.6 million single-nucleotide polymorphisms. Both the MaizeSNP50 BeadChip and the Sequenom MassArray iPLEX platforms confirm a subset of high-quality SNPs. Of these SNPs, we have mapped 931,484 to gene regions with a mean density of 40.3 SNPs per gene. The genome-wide association study identifies 16,408 expression quantitative trait loci. A two-step approach defines 95.1% of the eQTLs to a 10-kb region, and 67.7% of them include a single gene. The establishment of relationships between eQTLs and their targets reveals a large-scale gene regulatory network, which include the regulation of 31 zein and 16 key kernel genes. These results contribute to our understanding of kernel development and to the improvement of maize yield and nutritional quality.</p></blockquote><h2><span id="2-材料-方法和结论">2. 材料、方法和结论</span></h2><h3><span id="21-实验材料">2.1 实验材料</span></h3><p>作者首先收集了 508 份包含热带、亚热带以及温带种质资源的玉米自交系。通过前期群体结构分析发现这些材料可以分为两个大的亚群（温带亚群和热带/亚热带亚群）。研究人员2010年把这些材料采用了单行不完全随机区组实验设计的方法种植在了湖北荆州。每个区块授粉6-8穗，在授粉15天后收集每个区块中3-4穗的五粒未成熟种子。随后作者将收自两个重复的种子混合提取了总 RNA，最终获得了 368 份材料的RNA。</p><p>同时收集了种植于中国农大农场的 SK 自交系授粉后 15 天的未成熟种子，作为对照材料用于后续分析。SK 自交系的RNASeq采取了两次技术重复。</p><blockquote><p>完全随机区组实验设计：<br>不完全随机区组实验设计：</p></blockquote><h3><span id="22-rnaseq-测序及结果统计">2.2 RNAseq 测序及结果统计</span></h3><p>作者使用插入片段大小为 200 bp 的 PE90 测序文库进行了 RNAseq 测序。过滤掉低质量的测序数据之后，368 份玉米自交系总共获得了 25.8 billion 的 Reads，每个样本平均得到了 70.1 million 的 Reads。其中 71%的 Reads 比对到了玉米 B73 v2 参考基因组上，70.3% 的Reads 可以比对到参考基因上。在比对到 Gene 上的Reads 中，有 71.6% 的Reads 覆盖超过了 Gene 长度的 50%。（Fig1a.）在比对到基因组上的Reads 中 有 83% 的 reads 为 unique mapped 用来构建一致性序列。<br><img src="fig-2.png" alt=" Fig1a. Gene coverage was calculated as the percentage of the gene region covered by reads out of the total gene length"></p><h3><span id="22-snp-检测与结果统计">2.2 SNP 检测与结果统计</span></h3><p>过滤掉低质量数据及包含测序接头的序列后，作者使用 SOAP2 比对软件将序列比对到了玉米v2参考基因组上。然后作者保留了与基因组有唯一比对的序列进行进一步的变异检测。使用  Samtools  软件及 MAQ 软件生成了一致性序列。随后作者使用两步法鉴定了 RNASeq 得到的 SNP。</p><p>第一步，作者首先得到了群体的多态性位点。具体操作如下：使用 realSFS 软件（采用贝叶斯算法）计算了368份自交系比对上的序列的变异概率。变异可能性概率小于 99% 或者覆盖深度 &lt; 50x 的位点首先被过滤掉。</p><p>为进一步减少由于 比对引起的假阳性位点，作者建立了如下的比对误差集：使用 MAQ 模拟了来自全转录组的数据，使用（-r 0）参数，使的模拟的数据不含变异。共 680M的 Reads 大约覆盖基因组 30x。然后将模拟得到的 Reads 使用相同的参数比对到参考基因组上，使用与之前相同的策略检测SNP位点。由于作者使用不含变异位点的模拟数据，所以这一步得到的SNP可以用必读中产生的假阳性来解释，然后这些位点被当作MES（错误集）去筛除真实数据中的SNP位点。</p><p>第二步，作者使用 Pileup 软件提取了每个自交系每个SNP的共有碱基、参考碱基、共有碱基质量、SNP质量分数以及测序深度。然后将满足以下条件的共有碱基视为其个体基因型：<br>如果共有碱基与参考碱基不同，则非参考等位基因需与群体中检测到的一致，且 SNP 质量分数大于 20 （99%）。如果共有碱基与参考碱基一致，共有碱基的质量分数 &gt;= 20 最小覆盖深度 &gt;= 5x.</p><p>不满足这些条件的位点作者将其标记为缺失。由此，作者得到了群体的基因型。</p><p>经过这两个步骤，作者共获得了 3,619,762 个SNPs。（Table 1）</p><p><img src="fig-3.png" alt="Table 1: Summary of SNPs in 368 maize inbred lines."></p><p>其中， 2,636,164 SNPs 落在了外显子上，其数目是之前 6 个骨干自交系（468,900 exonic SNPs）的 5.6 倍。是已报道 NAM 群体（352,000 exonic SNPs）的 7.5 倍。是 B73 和 Mo17之间差异（73,900 exonic SNPs）的 35.7 倍。同时，NAM 群体中 69.7%  的 SNP 和 B73/Mo17 差异 SNP 的 87.5% 都在该研究的 SNPs 中。（Fig1b）。<br><img src="fig-4.png" alt=" Fig1b. Red circle stands for SNPs of NAM population, blue circle stands for SNPs of B73/Mo17, and green circle and yellow circle stands for SNPs of this study before and after filtering sites with a missing rate &gt;0.6, respectively."></p><p>总而言之，作者共获得了 1.6 million 的新 SNPs。与 B73 参考基因组相比，这些自交系的平均变异数目为 235,651。变化范围从 101,020 到 313,630 。</p><h3><span id="23-缺失基因型插补">2.3 缺失基因型插补</span></h3><p>作者使用 fastPHASE 软件（基于单倍型聚类算法开发的软件）对缺失的基因型进行了插补。作者将杂合的位点标记为了缺失。同时为了确定插补精度是否受到基因型缺失程度的影响，他们随机选择了1% 的 SNP位点（缺失率为 10% - 90% ）进行掩盖。然后通过随机掩盖一些材料的已知基因型位点计算其插补精确度。插补精确度由正确插补的为位点与总掩蔽的位点的比例表示。</p><p>结果表明，当缺失数据缺失程度为 0.6 时，插补精度为99.3％。（Fig2）所以，作者使用 缺失率为 0.6 时的 SNPS 标记，共 1,026,244 个，进行了插补。最后，根据SNP所在基因组的物理位置进行了 SNP 命名。<br><img src="fig-5.png" alt="Fig2. Imputation accuracy and number of SNPs under variouscutoffs of missing rate"></p><h3><span id="24-假阳性控制">2.4 假阳性控制</span></h3><p>为了控制假阳性，作者使用了包含两个重复的三个自交系（SK, Han21 和 Ye478），使用相同的方法及参数进行了 SNP Calling 和缺失基因型插补，并计算了插补前后的基因型一致性。发现一致性均超过了 99%。为了计算插补前的基因型一致性，作者仅考虑了不含缺失基因型的位点。一致性比率为一致位点数与可比较的总数的比例。（Table 2.）。<br><img src="fig-6.png" alt="Table 2 Concordant rate for each pair of positive control"><br>另外，该研究的基因型还与 MaizeSNP50 BeadChip 测定的基因型进行了比较，结果发现在插补之前一致性为 98.6% 查补后为 96.7%。（Table 3 和 Fig 3）.<br><img src="fig-7.png" alt=" Summary of the concordance rate between genotypes from this study and that from the Illumina MaizeSNP50 BeadChip data "></p><p><img src="fig-8.png" alt="(a) Concordance rate distribution of samples. Rates were calculated for each inbredline. (b) Concordance rate distribution of SNP sites. Rates were calculated for eachcomparable SNP site"></p><p>鉴于与  MaizeSNP50 BeadChip 芯片分型的 Overlap SNP 的最小等位基因频率（MAF）与非重叠 SNP 的差异显着，作者进一步比较了不同 MAF 的SNP 的一致性，发现所有 SNP 的一致性均高于96％。（黑色为 overlap 的10117 个SNP，红色为其他非 Overlap 的SNP）。<br><img src="fig-9.png" alt="MAF"></p><p><img src="fig-10.png" alt="Position related to gene body"></p><p><img src="fig-11.png" alt="Table 4. "></p><h3><span id="25-基因型一致性评估及snp-验证">2.5 基因型一致性评估及SNP 验证</span></h3><p>作者对相同自交系在该研究和  Illumina MaizeSNP50 BeadChip 中的基因型的一致性进行了评估。</p><blockquote><p>Illumina MaizeSNP50 BeadChip 芯片检测基因型是当时标记密度最高的芯片，其基于玉米参考基因组设计，大部分的SNP是common 变异位点。位于基因编码区的 SNP 约占标记总数的 1/3 。而最新的芯片密度已经到达了 600 K。</p></blockquote><p>一致性比率为一致的位点数与 overlaped SNP 位点总数。此外还计算了 纯合一致率，即纯和基因型位点数与总数的比值。</p><p>作者随机挑选了355 个SNP（MAF &gt;5%）通过 Sequenom MassArray iPLEX 基因分型鉴定了其在 96 个自交系中的基因型。使用了与 Illumina MaizeSNP50 BeadChip 比较中一致的参数鉴定其一致性。</p><p><img src="fig-12.png" alt="Table 5. Summary of the concordance rate between genotypes from RNA-seq and those from the Sequenom validation data "></p><p>此外，作者通过 PCR 从基因组 DNA 扩增了10个基因，并使用ABI3730对这些PCR产物进行了测序。RNAseq 检测到的 201个SNP 与来自于基因组 PCR 检测得到变异位点一致性达到了 96.1%。</p><p>综上，说明本研究中通过 RNAseq 得到的 SNP 可靠性较高，可用于及后续分析。</p><p>由于样本量和这些样本之间的关系，368 个近交系的总体基因组多样性的 Watterson’s θ 为 0.0196。</p><h3><span id="26-snp-注释">2.6 SNP 注释</span></h3><p>作者根据SNP在基因组及转录本中的位置进行了分类（基因间区、内含子、外显子等），对于落在外显子上的SNP进一步分为 CDS、5’ UTR 及 3’ UTR 区域。</p><p>同时，作者还根据SNP是否引起氨基酸的变异，将落在 CDS 区域中的 SNP 分类为同义突变和非同义突变。</p><p>导致提前终止或者破坏掉终止密码子的 SNP 被注释为大效应 SNP。</p><h3><span id="25-与之前研究的比较">2.5 与之前研究的比较</span></h3><p>作者还从 Panzea 下载了之前发表的 NAM 群体的数据，并与 落在外显子区域上的SNP进行了比较。与此同时也提取了 B73 和 Mo17 的 SNP 进行了比较。</p><h4><span id="26-ld-衰减计算">2.6 LD 衰减计算</span></h4><p>使用 Haploview 软件计算了250kb 内所有的 LD 。设定参数为：<code>-n -maxdistance 250 -minMAF 0.005 -hwcutoff 0 -dprime</code>。<br>以 50 bp为步长，计算100bp 滑动窗口内的平均 R^2，并确定平均配对到步移窗口中点的距离。然后使用 R 程序绘制R2 对标记距离的LD衰减曲线。</p><h4><span id="27-已知基因和转录本的定量">2.7 已知基因和转录本的定量</span></h4><p>使用 RSEM 软件进行基因和转录本的表达定量，并使用 RPKM对定量结果归一化。</p><blockquote><p>RSEM 使用EM算法（期望最大法）估算最大似然（ML）将多比对的序列分配给特定的基因或者转录本。</p></blockquote><h4><span id="28-分位数变换">2.8 分位数变换</span></h4><p>对于每一个样本，作者选取大于 &gt;0 的基因表达量的中位数用于后续分析。通过线性模型检测 eQTL 的假设之一是每个基因型类型的表达值服从正态分布，但是异常值以及测序读数的错误估计导致并不满足正态分布，因此使用正常的分位数转化（使用R程序的 qqman函数）对每个基因的表达量进行归一化。虽然分位数转化并不能完全解决问题：它只能保证表型的整体正常，但是在每个基因型类型中不一定正常，然而考虑到遗传连锁分析中的微小效应，分位数变化对防止建模的强烈偏离来说不失为一种简单、明智的方法。同样的，作者对转录本也使用分位数进行了归一化。</p><h4><span id="29-群体结构与关联分析">2.9 群体结构与关联分析</span></h4><p>作者使用了缺失率&lt;20% ，MAF&gt;5% 的16,338 SNPs 进行了 群体结构和亲缘关系的计算。群体结构的计算使用了基于 Bayesian Markov Chain Monte Carlo (MCMC)  的软件 STRUCTURE 软件进行计算：Burn-in 和 MCMC replications 都设置为了 10,000 。设置 k=3, 重复运行 5 次。使用  CLUMPP  软件整合 Structure运行的结果。使用相同的 SNP 基于 Loiselle 的方法计算亲缘关系，使用 TreeBeST 软件重建了 368 份自交系的 NJ Tree，估计节点的 bootstrap 为 100。使用 MEGA 软件对得到的进化树进行可视化。基于 Patterson 等人的方法，使用插补后的 SNPs 对自交系个体进行 PCA 分析。前两个主要成分用于可视化个体和调查组之间的遗传相关性。分位数变换后的表达量用来区分不同基因及转录本的表达水平。<strong>使用了TASSEL 软件，考虑群体结构和亲缘关系的线性混合模型对 MAF &gt;5% 的SNP和表达量进行关联分析</strong>。使用通过完整模型和减少模型（无标记）的残差平方和（RSS）计算的部分 F-test 来测试每个 SNP 的关联显着性。作者使用 PEER 软件进一步估计了由贝叶斯因子分析引起表达变异的隐藏混杂因素。除人口结构外，与基因表达变异的 6 个因子和与转录本表达变异相关的8个隐藏因子被检测并加入到混合模型中，以检验关联显着性的有效性。分析中剔除了由 RNSeq 得到的杂合基因型。</p><h4><span id="210-多重检验矫正">2.10 多重检验矫正</span></h4><p>使用 Bonferroni 方法，设置 α=0.05 （P&lt;3.11 e−12 or 2.12 e−12）对假阳性结果进行控制。</p><h4><span id="211-eqtl-的鉴定">2.11 eQTL 的鉴定</span></h4><p>使用 TASSEL 软件 MLM 线性模型进行分析。</p><p>第一步，将使用 BH threshold 阈值矫正的 5 kb 之内的 SNP 聚为一个 cluster 。参考前人研究结果，具有er 内至少三个 显著的 SNP 的Cluster 才作为一个候选 eQTL，由其显著 SNP 代表。</p><p>第二步，LD（r2 &gt; 0.1）中具有相同表达性状的其他更重要的候选eQTL的候选eQTL被认为是由LD结构引入的假阳性关联，然后被去除。如果两个候选 eQT L的显着性相同，则使用 R 统计计算环境中的 lm 函数，通过多元线性回归（MLR）估计每个 eQTL 中相关 SNP 的联合效应。在拟合模型之前，对每个标记进行重新编码，将具有参考基因型的自交系设置为 1 ，其他自交系设置为 0 。然后使用最小二乘估计拟合模型。基于Akaike信息准则（AIC）的标记的前后（逐步）选择从拟合空模型（无标记）开始。## 这句不理解<br>在之后每个步骤中，评估模型的全局重要性，以及新添加的标记的重要性。在向后的每个步骤中，逐渐剔除显著性最低的标记。使用 R2 计算最佳回归模型解释的总表型变异的比例。保留具有较大联合效应的 eQTL。</p><p>计算两个候选 eQTL （较不显著的 eQTL 和其他 eQTL 中更显著的 eSNPs 中的 Lead SNP）的 LD 程度。 如果在靶基因的转录起始位点或转录终点位点的 20kb 内发现了导联SNP，则认为 eQTL 是局部的;否则，eQTL被认为是遥远的。</p><p>结合种群结构和随机遗传背景，通过求解线性混合模型估计每个 eQTL 的影响。虽然非遗传因素可能对确定基因表达很重要，但这种方法的简单性仍可用于揭示基因表达的遗传模型。</p><p>玉米B73的表达图谱提供了正交信息（非遗传变异）以通过自然遗传变异支持基因调控。</p><h4><span id="212-网络分析">2.12 网络分析</span></h4><p>使用 Gene 及其调控因子构建遗传网络。位于 eQTL 物理位置区域内并含有该 eQTL 的 lead SNP 的一个基因被指定为该基因的调节因子。在成对调节关系的基础上，通过从调节子到靶基因产生有向边缘来连接节点（基因）。使用玉米 ProFITS 数据库注释 TFs 。</p><h4><span id="213-go-富集分析">2.13 GO 富集分析</span></h4><p>使用网页工具 agriGO 进行 GO 分析，</p><h4><span id="214-类胡萝卜素定量">2.14 类胡萝卜素定量</span></h4><p>作者2009年在雅安进行了一次复制，采用完全随机区组设计，每行中超过6株植物自花授粉，并且使用 HPLC将来自每个品系的膨化的 50 粒籽粒用于类胡萝卜素定量。</p><p>类胡萝卜素，包括α-胡萝卜素，叶黄素，β-胡萝卜素，β-隐黄质和玉米黄质，通过对外标准的标准回归来量化。</p><p>衍生的维生素原A（Va）的浓度通过α-胡萝卜素，β-胡萝卜素和β-隐黄质的总和来计算：维生素A =β-胡萝卜素+（α-胡萝卜素+β-隐黄质）/ 2。</p><h2><span id="3-讨论">3. 讨论</span></h2><ol><li>针对使用 RNAseq 检测变异的一些限制因素的优化，首先使用了玉米自交系而不是杂交种来避免由等位基因特异表引起的偏好。可变剪切会导致Reads 在比对到剪切位点时产生错误。因此作者在比对到连续外显子上考虑至少有两条或者更多的测序质量分数大于 20 的 Reads。</li><li>获得了大量的变异位点，对玉米研究有重要的意义</li><li>通过RNAseq 与MaizeSNP50 BeadChip 以及 Sequenom MassArray iPLEX 检测验证的位点存在高度一致性，而一致性低的部分可能由以下原因组成：  a.) 大量重复序列以及多拷贝导致的 SNP 假阳性的发生。 b.) 一些存在的拷贝数变异</li></ol><h2><span id="参考信息">参考信息</span></h2><p>文章连接：<a href="https://www.nature.com/articles/ncomms3832#methods" target="_blank" rel="noopener">https://www.nature.com/articles/ncomms3832#methods</a><br>不完全随机区组设计：<a href="https://onlinelibrary.wiley.com/doi/pdf/10.1111/j.1469-1809.1936.tb02134.x" target="_blank" rel="noopener">https://onlinelibrary.wiley.com/doi/pdf/10.1111/j.1469-1809.1936.tb02134.x</a></p>]]></content>
      
      
      <categories>
          
          <category> 文献阅读 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文献阅读 </tag>
            
            <tag> eQTL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Barplot作图代码</title>
      <link href="/2019/08/14/Barplot%E4%BD%9C%E5%9B%BE%E4%BB%A3%E7%A0%81/"/>
      <url>/2019/08/14/Barplot%E4%BD%9C%E5%9B%BE%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p><img src="barplot.png" alt="image.png"></p><p>ggplot2 barplot 分面图代码如下：</p><pre class=" language-R"><code class="language-R">library(ggplot2)Data <- read.table("data.txt",header = TRUE)Data <- as.data.frame(Data)attach(Data)Data$Time <- factor(Time,order=TRUE,levels=c("Early","Mid","Late")) ## Temperature p<-ggplot(data=Data, aes(x=Month, y=Temperature,fill = Time)) +   geom_bar(stat="identity", position = position_dodge(width = 0.6),width = 0.5) +  geom_text(aes(label=Temperature), position = position_dodge(width=0.6), vjust=-0.3) +   facet_grid(Year ~ .) + scale_y_continuous(limits = c(0,max(Temperature)))p <- p + ggtitle(label = "Temperature changes") + theme_light()</code></pre><p>数据源(data.txt)：</p><pre class=" language-txt"><code class="language-txt">Year    Month    Time    Temperature    Rainfall    Light2017    6    Early    23.6     19.9     66.1 2017    6    Mid    26.9     22.7     89.2 2017    6    Late    26.8     21.2     85.5 2017    7    Early    29.7     4.1     82.7 2017    7    Mid    29.2     73.1     72.0 2017    7    Late    25.8     28.3     32.6 2017    8    Early    28.8     7.3     88.9 2017    8    Mid    26.9     7.7     64.2 2017    8    Late    23.9     13.0     38.6 2017    9    Early    23.1     9.4     38.8 2017    9    Mid    23.6     6.7     88.0 2017    9    Late    22.4     9.3     50.2 over    6    Early    24.97     11.08     111.76 over    6    Mid    27.09     22.70     107.02 over    6    Late    27.03     14.45     88.83 over    7    Early    27.44     46.23     58.67 over    7    Mid    26.45     55.59     51.99 over    7    Late    27.84     48.73     74.16 over    8    Early    26.38     43.68     46.28 over    8    Mid    26.20     37.09     55.60 over    8    Late    24.08     17.38     70.74 over    9    Early    22.07     31.39     43.31 over    9    Mid    20.56     33.70     50.70 over    9    Late    19.49     5.20     48.54 </code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用ggbiplot绘制主成分图</title>
      <link href="/2019/08/14/%E4%BD%BF%E7%94%A8ggbiplot%E7%BB%98%E5%88%B6%E4%B8%BB%E6%88%90%E5%88%86%E5%9B%BE/"/>
      <url>/2019/08/14/%E4%BD%BF%E7%94%A8ggbiplot%E7%BB%98%E5%88%B6%E4%B8%BB%E6%88%90%E5%88%86%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>软件链接：<a href="https://github.com/vqv/ggbiplot" target="_blank" rel="noopener">https://github.com/vqv/ggbiplot</a></p><h3><span id="安装">安装</span></h3><pre class=" language-R"><code class="language-R">library(devtools)install_github("vqv/ggbiplot")</code></pre><h3><span id="使用">使用</span></h3><pre class=" language-R"><code class="language-R">library(ggbiplot)data(wine)wine.pca <- prcomp(wine, scale. = TRUE)ggbiplot(wine.pca, obs.scale = 1, var.scale = 1,  groups = wine.class, ellipse = TRUE, circle = TRUE) +  scale_color_discrete(name = '') +  theme(legend.direction = 'horizontal', legend.position = 'top')</code></pre><h3><span id="示例图">示例图</span></h3><p><img src="PCA.png" alt="PCA.png"></p>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> bioinformatics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> plot </tag>
            
            <tag> R </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Circos作图系列学习笔记一</title>
      <link href="/2019/08/14/Circos%E4%BD%9C%E5%9B%BE%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80/"/>
      <url>/2019/08/14/Circos%E4%BD%9C%E5%9B%BE%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<h1><span id="circos作图系列学习笔记1-circos-软件安装">【Circos作图系列学习笔记】1. Circos 软件安装</span></h1><p>CIRCOS是一个将数据和信息可视化的工具包，它可以在一个圆形的布局中可视化数据，这就能够使CIRCOS很理想的研究物体或者位置之间的关系。</p><a id="more"></a><p>Cricos 官网：<a href="http://circos.ca/" target="_blank" rel="noopener">http://circos.ca/</a><br><img src="circos-1.png" alt="Circos Plot"></p><h2><span id="1-常规-circos-安装">1. 常规 Circos 安装</span></h2><p>下载网站：<a href="http://circos.ca/software/download/" target="_blank" rel="noopener">http://circos.ca/software/download/</a></p><p><img src="circos-2.png" alt="下载链接"></p><p>选取与自己系统相匹配的安装包进行下载。</p><pre class=" language-sh"><code class="language-sh"># install circos> tar xvfz circos-0.69-6.tgz> cd circos-0.69-6</code></pre><h2><span id="2-conda-安装">2. conda 安装</span></h2><p>conda 安装算是最简便快捷的方法了，一条命令搞定： <code>conda install -c bioconda circos</code> 或者<code>conda install -c bioconda/label/cf201901 circos</code> 均可。</p><h2><span id="3-安装中问题解决">3. 安装中问题解决</span></h2><p><img src="circos-3.png" alt="GD Missing"></p><p>解压文件或者经过 conda 安装完成后，使用 <code>circos -modules</code> 测试是否可用，当出现模块缺失时，按照 perl 软件模块安装方法安装缺失模块。<br>需要注意的是，出现 GD 模块缺失信息的话，尤其在安装 GD 模块后仍无法解决的原因很大情况下是库文件版本名称改变了，做一个链接即可，命令：</p><pre class=" language-sh"><code class="language-sh">## 首先切换至 libwebp.so.6 文件所在 lib 文件夹ln -s libwebp.so.6 libwebp.so.7</code></pre><p>问题解决：<br><img src="circos-4.png" alt="问题解决"></p><p>小刘哥 2019-05-16<br>【Circos作图系列学习笔记】1. Circos 软件安装<br>【Circos作图系列学习笔记】2. Circos 数据准备</p>]]></content>
      
      
      <categories>
          
          <category> perl </category>
          
          <category> bioinformatics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> circos </tag>
            
            <tag> perl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站搭建指南</title>
      <link href="/2019/08/14/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/"/>
      <url>/2019/08/14/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<h1><span id="课题组网站搭建">课题组网站搭建</span></h1><h2><span id="1-搭建网站的目的">1. 搭建网站的目的</span></h2><p>搭建课题组服务器出于以下几个目的：</p><ol><li>作为课题组的内容展示平台，收集、记录、展示成员风采</li><li>传播、传承实验室操作技能（文字 + 图片 + 视频）</li><li>作为文件服务器对课题组实验数据进行存储</li><li>作为实验室药品管理中心数据库</li><li>作为实验室测序引物中心数据库</li><li>作为实验室田间材料分类管理数据库（材料生育情况、各播种地点气象学信息）</li><li>读书报告学习交流中心</li><li>匿名墙</li><li>……</li></ol><a id="more"></a><h2><span id="2-搭建服务器基本框架">2. 搭建服务器基本框架</span></h2><p>本着尽量使用开源软件、安全稳定的原则，我们使用 LNMP 架构进行服务器网站搭建基本框架。BLOG 系统采用开源静态页面 Hexo 软件进行生成。文件系统服务由 nginx 提供并且由 h5ai 软件提供目录列表服务。 </p><ul><li><a href="https://ubuntu.com/download/server/thank-you?version=18.04.2&architecture=amd64" target="_blank" rel="noopener">Ubuntu Server version 18.04.2 LTS</a> .</li><li><a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">Nginx</a> version 1.16 or greater.</li><li><a href="https://www.mysql.com/" target="_blank" rel="noopener">MySQL</a> version 5.6 or greater <em>OR</em> <a href="https://mariadb.org/" target="_blank" rel="noopener">MariaDB</a> version 10.1 or greater.</li><li><a href="https://secure.php.net/" target="_blank" rel="noopener">PHP</a> version 7.3 or greater.</li><li><a href="https://larsjung.de/h5ai/" target="_blank" rel="noopener">h5ai version 0.29.2</a> </li><li><a href="https://nodejs.org" target="_blank" rel="noopener">node.js</a> version 12.0</li><li><a href>Git</a> version 2.9</li><li><a href>Hexo</a> version </li><li>WordPress </li><li>……</li></ul><p>LNMP是指一组通常一起使用来运行动态网站或者服务器的自由软件名称首字母缩写。L 指 Linux，N 指 Nginx，M一般指 MySQL，也可以指 MariaDB，P 一般指 PHP，也可以指 Perl 或 Python。</p><h3><span id="21-安装-ubuntu-server-1804-lts">2.1 安装 Ubuntu Server 18.04 LTS</span></h3><p><img src="ubuntu-4.png" alt="Ubuntu 18.04 Server 18.04.2 LTS"></p><p>下载链接：<a href="https://ubuntu.com/download/server/thank-you?version=18.04.2&architecture=amd64" target="_blank" rel="noopener">Ubuntu Server 18.04.2 LTS</a></p><p><strong>我们使用 Windows  10 软件商店自带 Ubuntu 18.04 进行试验测试，安装方法如下</strong>：</p><ol><li>打开 <code>控制面板 --&gt; 程序 --&gt; 程序和功能</code> 点击 <code>启动或关闭 Windows 功能</code></li><li>点击启用 <code>适用于 Linux 的 Windows 子系统</code></li><li>重启机器</li><li>打开微软应用商店，搜索 Ubuntu</li><li>点击 Ubuntu 18.04 下载安装</li><li>添加 Ubuntu 用户及密码</li><li>大功告成</li></ol><p><img src="Ubuntu-7.png" alt></p><p> 安装完成后，将软件源替换为清华源, 备份并编辑 <code>sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak &amp;&amp; sudo vim /etc/apt/sources.list</code></p><pre class=" language-txt"><code class="language-txt"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse# 预发布软件源，不建议启用# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</code></pre><p>使用 <code>sudo apt update &amp;&amp; sudo apt upgrade</code> 更新本地软件。</p><p>安装基本软件：<code>sudo apt install htop tree git vim curl</code> </p><h3><span id="22-使用宝塔面板一键安装-lnmp">2.2 使用宝塔面板一键安装 LNMP</span></h3><p><a href="https://www.bt.cn/" target="_blank" rel="noopener">宝塔面板</a> 是一款服务器管理软件，支持 Windows 和 Linux 系统，可以通过 Web 端轻松管理服务器，提升运维效率。例如：创建管理网站、FTP、数据库，拥有可视化文件管理器，可视化软件管理器，可视化CPU、内存、流量监控图表，计划任务等功能。</p><p><strong>Centos安装命令：</strong></p><pre class=" language-sh"><code class="language-sh">$ yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh</code></pre><p><strong>Ubuntu/Deepin 安装命令：</strong></p><pre class=" language-sh"><code class="language-sh">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh</code></pre><p><strong>Debian安装命令：</strong></p><pre class=" language-sh"><code class="language-sh">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && bash install.sh</code></pre><p><strong>Fedora安装命令:</strong></p><pre class=" language-sh"><code class="language-sh">wget -O install.sh http://download.bt.cn/install/install_6.0.sh && bash install.sh</code></pre><p> <strong>Linux面板6.9.7升级命令：</strong></p><pre class=" language-sh"><code class="language-sh">curl http://download.bt.cn/install/update6.sh|bash</code></pre><p>安装成功后，安装信息给出宝塔管理面板的登陆接口及账户密码：</p><p><img src="bt-1.png" alt="BT Success"></p><p>在浏览器中输入宝塔控制面板管理入口：<code>192.168.5.208:8888/a3b17e21</code>, 输入账户<code>tdmpqguz</code>, 输入密码<code>df53ffd8</code> 登陆管理。</p><p>安装 <code>nginx, MySQL(mariadb), PHP</code>等软件：</p><p><img src="bt-2.png" alt></p><p>安装完成后重启服务器及控制面板，若 <code>nginx</code> 服务没有启动，则在终端或者控制面板中手动启动之。</p><h3><span id="23-使用-lnmp-一键安装">2.3 使用  一键安装</span></h3><p>LNMP一键安装包是一个用Linux Shell 编写的可以为 CentOS/RHEL/Fedora/Aliyun/Amazon、Debian/Ubuntu/Raspbian/Deepin/Mint Linux VPS 或独立主机安装 LNMP(Nginx/MySQL/PHP)、LNMPA(Nginx/MySQL/PHP/Apache)、LAMP(Apache/MySQL/PHP) 生产环境的 Shell 程序。</p><p>使用一键安装命令安装 LNMP：</p><pre class=" language-sh"><code class="language-sh"># wget http://soft.vpser.net/lnmp/lnmp1.6.tar.gz -cO lnmp1.6.tar.gz && tar zxf lnmp1.6.tar.gz && cd lnmp1.6 && ./install.sh lnmp</code></pre><p>安装完成后：</p><p><img src="lnmp-2.png" alt></p><p>浏览器输入 IP 地址显示安装成功：</p><p><img src="lnmp-1.png" alt></p><h2><span id="3-使用-h5ai-搭建文件目录列表">3. 使用 H5ai 搭建文件目录列表</span></h2><p><a href="https://larsjung.de/h5ai/" target="_blank" rel="noopener">h5ai</a> 是一款 PHP 开发的目录列表程序，由德国开发者 Lars Jung 主导开发，它提供多种文件目录列表呈现方式，支持多种主流 Web 服务器，例如 Nginx、Apache、Cherokee、Lighttpd 等，支持多国语言，可以直接在线预览视频、图片、音乐等，效果很炫。</p><p>示例网站：<a href="https://larsjung.de/h5ai/demo/" target="_blank" rel="noopener">https://larsjung.de/h5ai/demo/</a></p><p><img src="h5ai-1.png" alt></p><h3><span id="31-宝塔面板下安装配置-h5ai">3.1 宝塔面板下安装配置 h5ai</span></h3><ol><li>在宝塔控制面板中新建站点，如果有域名则填写域名，否则填写 IP 地址。</li></ol><p><img src="h5ai-0.png" alt></p><ol start="2"><li>从 h5ai 网站下载文件: <a href="https://release.larsjung.de/h5ai/h5ai-0.29.2.zip" target="_blank" rel="noopener">h5ai-0.29.2.zip</a>。将下载好的文件上传至新建下载网站根目录，并解压。</li></ol><p><img src="h5ai-5.png" alt></p><ol start="3"><li>删除其他无关文件。</li></ol><pre class=" language-txt"><code class="language-txt">404.htmlh5ai-0.29.2.zipindex.html</code></pre><ol start="4"><li>在宝塔面板中，进入软件商店，找到 PHP 设置。</li></ol><p><img src="h5ai-8.png" alt></p><ol start="5"><li>修改 PHP 配置 - 禁用函数，删除禁用函数 <code>exec</code>、<code>putenv</code> 、<code>passthru</code> 、<code>scandir</code>。</li></ol><p><img src="h5ai-7.png" alt></p><ol start="6"><li>同样在软件商店中修改 Nginx 配置, 在 <code>index.html</code>行后添加 <code>/_h5ai/public/index.php</code> 。</li></ol><p><img src="h5ai-3.png" alt></p><ol start="7"><li>添加在线预览图片等插件。</li></ol><p><img src="h5ai-6.png" alt></p><p>配置完成后，重启机器，在浏览器中输入 <code>http://IP/_h5ai/public/index.php</code> 查看 h5ai 目录。</p><h3><span id="32-在-lnmp-框架下安装配置-h5ai">3.2 在 LNMP 框架下安装配置 h5ai</span></h3><ol><li><p>使用 <code>lnmp vhost add</code>  命令新建站点</p><p><img src="lnmp1.4-vhost-add-1.png" alt></p></li><li><p>输入站点域名，没有的话直接使用 IP 地址</p></li><li><p>设置网站目录，以绝对路径表示</p></li><li><p>执行 <code>./pureftpd.sh</code> 安装 ftp 服务，并添加 ftp 账号及目录</p></li><li><p>将  <a href="https://release.larsjung.de/h5ai/h5ai-0.29.2.zip" target="_blank" rel="noopener">h5ai-0.29.2.zip</a> 解压后上传至网站根目录</p></li><li><p>访问 <a href="http://域名或IP/_h5ai/public/index.php" target="_blank" rel="noopener">http://域名或IP/_h5ai/public/index.php</a>  查看是否可以访问成功</p></li><li><p>修改当前站点下的 nginx  配置文件 <code>/usr/local/nginx/conf/vhost/域名.conf</code> 在 root 行下添加：</p><p><code>index index.html index.php /_h5ai/public/index.php;</code></p><p><img src="h5ai-nginx-config.png" alt></p></li><li><p>修改 php 配置文件 <code>/usr/local/php/etc/php.ini</code> , 搜索 <code>disable_functions</code>，将其后面的<code>scandir</code>、<code>exec</code> 和 <code>passthru</code> 删除，保存</p></li><li><p>使用 <code>lnmp restart</code> 命令重启 LNMP 服务</p></li><li><p>安装必要的插件</p></li><li><p>将要分享的文件放置于根目录下，在浏览器中输入 IP 地址即可</p><p><img src="h5ai-10.png" alt></p></li><li><p>搞定收工。</p></li></ol><h3><span id="33-安装-h5ai-相关插件">3.3 安装 h5ai 相关插件</span></h3><h4><span id="331-安装-exif-模块">3.3.1 安装 exif 模块</span></h4><ol><li>下载 PHP 源码安装包：<a href="https://www.php.net/distributions/php-7.3.8.tar.gz" target="_blank" rel="noopener">php-7.3.8.tar.gz</a> </li><li>解压后，切换至 <code>php-7.3.8/ext/exif</code> 目录下</li><li>运行 <code>/usr/local/php/bin/phpize</code></li><li>执行编译命令 <code>./configure --with-php-config=/usr/local/php/bin/php-config</code></li><li>执行编译及安装 <code>make &amp;&amp; make install</code></li><li>修改 <code>/usr/local/php/etc/php.ini</code> 文件，查找：<code>extension=</code> 再最后一个 <code>extension=</code> 后面添加上<code>extension = &quot;exif.so&quot;</code></li><li>执行 <code>/etc/init.d/php-fpm restart</code> 重启 PHP</li><li>搞定收工</li></ol><h4><span id="332-安装-ffmpeg-实现视频缩略图预览">3.3.2 安装 ffmpeg 实现视频缩略图预览</span></h4><p>使用命令 <code>apt install ffmpeg -y</code> 安装 <code>ffmeg</code> 实现视频缩略图预览。</p><h4><span id="333-安装-imagemagick-实现-pdf图片预览">3.3.3 安装 imagemagick 实现 PDF/图片预览</span></h4><p>使用命令 <code>apt install imagemagick -y</code> 安装 imagemagick 实现 PDF、图片的缩略图预览。</p><h4><span id="334-开启数据打包下载">3.3.4 开启数据打包下载</span></h4><p>使用命令 <code>apt install zip</code> 实现数据打包下载。</p><h3><span id="34-实现-h5ai-其他功能">3.4 实现 h5ai 其他功能</span></h3><p>编辑 <code>/home/wwwroot/database.lab/_h5ai/private/conf/options.json</code> 文件，实现 h5ai 其他功能。</p><ol><li><p>修改后台密码</p><p>首先在此网址 <a href="http://www.ttmd5.com/hash.php?type=A" target="_blank" rel="noopener">http://www.ttmd5.com/hash.php?type=A</a> 生成自定义 sha512 密码, 然后修改 “passhash” 字符后的字符串为解密的字符串。开启打包下载</p></li><li><pre class=" language-txt"><code class="language-txt">    "download": {        "enabled": true,        "type": "php-zip",        "packageName": null,        "alwaysVisible": true    }</code></pre></li><li><p>开启文件信息显示</p><pre class=" language-txt"><code class="language-txt">"info": {        "enabled": true,        "show": false,        "qrcode": true,        "qrFill": "#999",        "qrBack": "#fff"    }</code></pre></li><li><p>默认简体中文</p><pre class=" language-txt"><code class="language-txt">"l10n": {        "enabled": true,        "lang": "zh-cn",        "useBrowserLang": true    }</code></pre></li><li><p>开启文件搜索</p><pre class=" language-txt"><code class="language-txt">"search": {        "enabled": true,        "advanced": true,        "debounceTime": 300,        "ignorecase": true    }</code></pre></li><li><p>开启多文件选择</p><pre class=" language-txt"><code class="language-txt">"select": {        "enabled": true,        "clickndrag": true,        "checkboxes": true    }</code></pre></li></ol><h2><span id="4-搭建-hexo-博客网站">4. 搭建 Hexo 博客网站</span></h2><h4><span id="41-安装最新长期支持版-nodejs">4.1 安装最新长期支持版 Node.js</span></h4><p><a href="https://nodejs.org/" target="_blank" rel="noopener">Node.js</a> 是一个通用编程的JavaScript平台，允许用户快速构建网络应用程序。 通过在前端和后端利用JavaScript，Node.js使开发更加一致和集成。 </p><p>从官方网站来看，最新的 LTS Nodejs 版文为 v10：</p><p><img src="nodejs-1.png" alt="Node.js"></p><p>参考文档：<a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener">https://github.com/nodesource/distributions</a> 安装 node.js v12。</p><pre class=" language-sh"><code class="language-sh"># Using Ubuntucurl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -sudo apt-get install -y nodejs# Using Debian, as rootcurl -sL https://deb.nodesource.com/setup_12.x | bash -apt-get install -y nodejs</code></pre><p>方便快捷：</p><p><img src="nodejs-2.png" alt="Node.js"></p><p><strong>通过npm安装node.js</strong></p><p>当然可以首先安装 node.js 的版本管理包 <code>npm</code> 然后再使用 npm 安装需要版本的 node.js。</p><pre class=" language-sh"><code class="language-sh">## install NVM (Node Version Manager)$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash$ source   ~/.bashrc || source   ~/.zshrc$ nvm ls-remote                 ## 查看 node 所有版本$ nvm install v10.16.1             ## 安装需要的版本$ nvm list                         ## 查看当前机器安装的版本$ nvm use v10.16.1                 ## 切换 node 版本$ nvm alias default v10.16.1      ## 设置默认版本</code></pre><p>npm 为 nodejs 的独立包，使用以下命令升级 npm：</p><pre class=" language-sh"><code class="language-sh">$ sudo npm install npm@latest -g</code></pre><h3><span id="42-安装-hexo-博客框架">4.2 安装 Hexo 博客框架</span></h3><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="noopener">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。其主要通过在本地配置好相应界面后，通过 git 直接传输至服务器然后进行静态展示。</p><p>Hexo 的安装依赖于 <code>git</code> 以及 <code>node.js</code> (version &gt; 6.9), 安装较为简单：</p><pre class=" language-sh"><code class="language-sh">$ sudo npm install -g hexo-cli</code></pre><p>具体配置详细见文章《Hexo搭建配置指南》。</p><h3><span id="42-hexo-的配置">4.2 Hexo 的配置</span></h3><h4><span id="421-配置网站信息">4.2.1 配置网站信息</span></h4><p>首先使用 <code>hexo init [folder]</code> 新建一个网站，编辑 <code>_config.yaml</code> 文件，添加相关网站信息等。</p><h4><span id="422-配置-hexo-主题">4.2.2 配置 Hexo 主题</span></h4><p>下载适用的主题，并在 <code>_config.yaml</code> 配件中进行修改。</p><h3><span id="43-hexo-的使用">4.3 Hexo 的使用</span></h3><p>Hexo 搭建的 Blog 系统主要用于大家日常的学习笔记、心得、读书报告等的展示。使用命令 <code>hexo new [layout] &lt;title&gt;</code> 新建相关内容。</p><pre class=" language-sh&#39;"><code class="language-sh&#39;">$ hexo publish [layout] <filename>    # 发表草稿$ hexo clean        # 清除缓存文件 (db.json) 和已生成的静态文件 (public)$ hexo generate        # 生成页面$ hexo server         # 启动服务</code></pre><h2><span id="5-参考链接">5. 参考链接</span></h2><ol><li><a href="https://linuxize.com/post/install-mariadb-on-centos-7/" target="_blank" rel="noopener">https://linuxize.com/post/install-mariadb-on-centos-7/</a></li><li>宝塔命令大全 <a href="https://www.bt.cn/btcode.html" target="_blank" rel="noopener">https://www.bt.cn/btcode.html</a></li><li><a href="https://linuxconfig.org/install-ffmpeg-on-ubuntu-18-04-bionic-beaver-linux" target="_blank" rel="noopener">https://linuxconfig.org/install-ffmpeg-on-ubuntu-18-04-bionic-beaver-linux</a></li><li><a href="https://blog.iwyc.cn/h5ai" target="_blank" rel="noopener">https://blog.iwyc.cn/h5ai</a></li><li><a href="https://github.com/limedroid/HexoLearning" target="_blank" rel="noopener">https://github.com/limedroid/HexoLearning</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BLOG </tag>
            
            <tag> Hexo </tag>
            
            <tag> LNMP </tag>
            
            <tag> Site </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用LNMP搭建WordPress个人网站</title>
      <link href="/2019/08/12/%E4%BD%BF%E7%94%A8LNMP%E6%90%AD%E5%BB%BAWordPress%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/"/>
      <url>/2019/08/12/%E4%BD%BF%E7%94%A8LNMP%E6%90%AD%E5%BB%BAWordPress%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<h1><span id="使用lnmp搭建wordpress个人网站">使用LNMP搭建WordPress个人网站</span></h1><p><a href="https://wordpress.org/" target="_blank" rel="noopener"><strong>WordPress</strong></a> 是一个以 <a href="https://zh.wikipedia.org/wiki/PHP" target="_blank" rel="noopener">PHP</a> 和 <a href="https://zh.wikipedia.org/wiki/MySQL" target="_blank" rel="noopener">MySQL</a> 为平台的 <a href="https://zh.wikipedia.org/wiki/自由及开放源代码软件" target="_blank" rel="noopener">自由开源</a> 的博客软件和 <a href="https://zh.wikipedia.org/wiki/内容管理系统" target="_blank" rel="noopener">内容管理系统</a>。其软件安装基本需求如下：</p><ul><li><a href="https://secure.php.net/" target="_blank" rel="noopener">PHP</a> version 7.3 or greater.</li><li><a href="https://www.mysql.com/" target="_blank" rel="noopener">MySQL</a> version 5.6 or greater <em>OR</em> <a href="https://mariadb.org/" target="_blank" rel="noopener">MariaDB</a> version 10.1 or greater.    </li><li><a href="https://wordpress.org/news/2016/12/moving-toward-ssl/" target="_blank" rel="noopener">HTTPS</a> support.</li></ul><h2><span id="1-lnmp一键安装">1. LNMP一键安装</span></h2><h3><span id="11-更换国内软件源提升下载速度">1.1 更换国内软件源，提升下载速度</span></h3><p>Ubuntu 18.04 系统安装完成后，更换源，提高软件下载安装速度。</p><pre class=" language-sh"><code class="language-sh">## 备份源文件$ sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak ## 替换为阿里源$ sudo vim /etc/apt/sources.list</code></pre><p>将阿里源写入 <code>sources.list</code> 文件：</p><pre class=" language-txt"><code class="language-txt">#阿里云源deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</code></pre><p>更新源后，使用 <code>apt update &amp;&amp; apt upgrade</code> 升级系统。</p><h3><span id="12-安装-lnmp">1.2 安装 LNMP</span></h3><p>纯净安装的系统下使用命令一键安装 LNMP：</p><pre class=" language-sh"><code class="language-sh"># wget http://soft.vpser.net/lnmp/lnmp1.6.tar.gz -cO lnmp1.6.tar.gz && tar zxf lnmp1.6.tar.gz && cd lnmp1.6 && ./install.sh lnmp</code></pre><p>选择合适的软件版本进行安装，安装时间从几十分钟到几十个小时不等，主要看网速。</p><p><img src="lnmp-1.png" alt></p><p>安装完成后如下图所示：</p><p><img src="lnmp-2.png" alt></p><p>在浏览器中键入 IP 地址，提示 LNMP 安装成功：</p><p><img src="lnmp-3.png" alt></p><h3><span id="13-新建虚拟主机">1.3 新建虚拟主机</span></h3><p>LNMP 安装完成后，使用命令 <code>lnmp vhost add</code> 添加站点。</p><h2><span id="2-wordpress-安装">2. WordPress 安装</span></h2><h3><span id="21-下载wordpress">2.1 下载WordPress</span></h3><p>在 <a href="https://wordpress.org/" target="_blank" rel="noopener">WordPress 官网 </a>下载 <a href="https://wordpress.org/latest.zip" target="_blank" rel="noopener">最新安装包</a>。</p><h3><span id="22-安装-wordpress">2.2 安装 WordPress</span></h3><p>将下载的安装包解压到虚拟主机根目录下 <code>/home/wwwroot/maize.lab</code></p><h3><span id="23-配置-wordpress">2.3 配置 WordPress</span></h3><h2><span id="3-安装-wordpress-主题">3. 安装 WordPress 主题</span></h2><h2><span id="4-安装-wordpress-插件">4. 安装 WordPress 插件</span></h2><h2><span id="5-使用-wordpress-发表文章">5. 使用 WordPress 发表文章</span></h2><h2><span id="6-wordpress-整合-ftp-服务">6. WordPress 整合 FTP 服务</span></h2><h2><span id="7-使用域名访问网站">7. 使用域名访问网站</span></h2><p>由于我们使用的本地局域网服务器搭建的网站，限制于内网访问，没有域名解析，所以可以在本地简单配置实现域名访问网站。</p><p>修改 <code>C:\Windows\System32\drivers\etc\hosts</code> 文件，在文件末尾添加：<code>192.168.1.5    maize.lab</code> </p><p>即可通过域名 <code>maize.lab</code> 访问网站主页。</p><h2><span id="参考链接">参考链接</span></h2><ol><li>Ubuntu 更换国内软件源：<a href="https://yq.aliyun.com/articles/639051" target="_blank" rel="noopener">https://yq.aliyun.com/articles/639051</a></li><li>安装 lnmp：<a href="https://lnmp.org/install.html" target="_blank" rel="noopener">https://lnmp.org/install.html</a></li><li>添加/删除虚拟主机：<a href="https://lnmp.org/faq/lnmp-vhost-add-howto.html" target="_blank" rel="noopener">https://lnmp.org/faq/lnmp-vhost-add-howto.html</a></li><li>LNMP替换安装下载源镜像地址的方法：<a href="https://lnmp.org/faq/lnmp-download-source.html" target="_blank" rel="noopener">https://lnmp.org/faq/lnmp-download-source.html</a></li><li></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> BT </tag>
            
            <tag> WordPress </tag>
            
            <tag> BLOG </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
